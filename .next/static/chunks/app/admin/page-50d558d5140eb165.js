(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1532:function(e,l,s){Promise.resolve().then(s.bind(s,6683))},6858:function(e,l,s){"use strict";s.d(l,{Z:function(){return t}});let t=(0,s(9205).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6683:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return f}});var t=s(7437),a=s(2265),r=s(7648),i=s(6305),n=s(9714),d=s(7279),c=s(5252),o=s(6275),x=s(4794),m=s(6865),u=s(6858),h=s(5162),g=s(8588);function f(){var e,l,s,f,v,j,N,p,y,b,w,k;let{user:S}=(0,h.t)(),Z=S?(0,g.Zu)(S.roles):null,[O,A]=(0,a.useState)(null),[P,E]=(0,a.useState)([]),[L,_]=(0,a.useState)(!0);(0,a.useEffect)(()=>{V()},[]);let V=async()=>{try{let e=[],l=!!(null==Z?void 0:Z.canViewAnalytics),s=!!(null==Z?void 0:Z.canViewAllOrders);l&&e.push(i.x.get("/admin/analytics/dashboard")),s&&e.push(i.x.get("/admin/orders?size=5"));let t=await Promise.all(e),a=0;if(l){let e=t[a];A(e.data.data),a+=1}else A(null);if(s){let e=t[a],l=e.data.data;E((null==l?void 0:l.content)||e.data.data||[])}else E([])}catch(e){console.error("Failed to fetch dashboard data",e),E([])}finally{_(!1)}};if(L)return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,t.jsx)(n.Od,{className:"h-32 w-full rounded-lg"},e))}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,t.jsx)(n.Od,{className:"h-80 w-full rounded-lg"}),(0,t.jsx)(n.Od,{className:"h-80 w-full rounded-lg"})]})]});let C=[{label:"Revenue (30d)",value:(0,d.xG)((null==O?void 0:O.monthRevenue)||0),icon:c.Z,color:"bg-green-500",href:"/admin/analytics"},{label:"Total Orders",value:(null!==(N=null==O?void 0:null===(e=O.salesFunnel)||void 0===e?void 0:e.orderCount)&&void 0!==N?N:0).toLocaleString(),icon:o.Z,color:"bg-blue-500",href:"/admin/orders"},{label:"Pending Orders",value:(null!==(p=null==O?void 0:null===(l=O.salesFunnel)||void 0===l?void 0:l.pendingOrders)&&void 0!==p?p:0).toLocaleString(),icon:x.Z,color:"bg-yellow-500",href:"/admin/orders?status=PENDING"},{label:"Low Stock Items",value:(null!==(y=null==O?void 0:null===(s=O.lowStockAlerts)||void 0===s?void 0:s.length)&&void 0!==y?y:0).toLocaleString(),icon:m.Z,color:"bg-red-500",href:"/admin/inventory?lowStock=true"}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Last updated: ",(null==O?void 0:O.generatedAt)?(0,d.p6)(O.generatedAt):"N/A"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map(e=>(0,t.jsx)(r.default,{href:e.href,children:(0,t.jsx)(n.Zb,{hover:!0,className:"h-full",children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.label}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1 truncate",children:e.value})]}),(0,t.jsx)("div",{className:(0,d.cn)("p-3 rounded-full text-white shrink-0",e.color),children:(0,t.jsx)(e.icon,{className:"h-6 w-6"})})]})})})},e.label))}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("h2",{className:"font-semibold text-gray-900",children:"Recent Orders"}),(0,t.jsxs)(r.default,{href:"/admin/orders",className:"text-sm text-primary hover:underline flex items-center",children:["View all ",(0,t.jsx)(u.Z,{className:"h-4 w-4 ml-1"})]})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:0===P.length?(0,t.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No orders yet"}):P.map(e=>(0,t.jsxs)(r.default,{href:"/admin/orders/".concat(e.id),className:"flex items-center justify-between px-6 py-4 hover:bg-gray-50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.id.slice(0,8).toUpperCase()}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(0,d.p6)(e.createdAt)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(n.OE,{status:e.status}),(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:(0,d.xG)(e.totalAmount)})]})]},e.id))})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)("h2",{className:"font-semibold text-gray-900",children:"Top Products"}),(0,t.jsxs)(r.default,{href:"/admin/analytics",className:"text-sm text-primary hover:underline flex items-center",children:["View analytics ",(0,t.jsx)(u.Z,{className:"h-4 w-4 ml-1"})]})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:(null==O?void 0:O.topProducts)&&0!==O.topProducts.length?O.topProducts.slice(0,5).map((e,l)=>(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600",children:l+1}),(0,t.jsx)("p",{className:"font-medium text-gray-900 line-clamp-1",children:e.productName})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.totalSold," sold"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:(0,d.xG)(e.totalRevenue)})]})]},e.productId)):(0,t.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No data available"})})]})]}),O&&(null!==(b=null===(f=O.lowStockAlerts)||void 0===f?void 0:f.length)&&void 0!==b?b:0)>0&&(0,t.jsx)(n.Zb,{className:"border-warning bg-warning-bg/20",children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-warning rounded-full text-white",children:(0,t.jsx)(m.Z,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"Low Stock Alert"}),(0,t.jsxs)("p",{className:"text-gray-600",children:[null!==(w=null===(v=O.lowStockAlerts)||void 0===v?void 0:v.length)&&void 0!==w?w:0," product",(null!==(k=null===(j=O.lowStockAlerts)||void 0===j?void 0:j.length)&&void 0!==k?k:0)>1?"s":""," are running low on stock"]})]}),(0,t.jsx)(r.default,{href:"/admin/inventory?lowStock=true",className:"px-4 py-2 bg-warning text-white rounded-lg hover:bg-warning/90 transition-colors",children:"View Items"})]})})})]})}}},function(e){e.O(0,[2972,6853,5878,9714,3550,2971,2117,1744],function(){return e(e.s=1532)}),_N_E=e.O()}]);