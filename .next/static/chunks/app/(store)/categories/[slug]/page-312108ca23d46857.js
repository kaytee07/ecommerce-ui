(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7481],{3449:function(e,t,a){Promise.resolve().then(a.bind(a,5167))},875:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},407:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8736:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3245:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},1817:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4794:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6275:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},6865:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7689:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3145:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(8461),s=a.n(r)},7648:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(2972),s=a.n(r)},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},8461:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return i},getImageProps:function(){return l}});let r=a(7043),s=a(5346),n=a(5878),c=r._(a(5084));function l(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let i=n.Image},5167:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),s=a(2265),n=a(9376),c=a(7648),l=a(9714),i=a(6305),o=a(7279),d=a(407),u=a(875);function h(){let e=(0,n.useParams)().slug,[t,a]=(0,s.useState)(null),[h,p]=(0,s.useState)([]),[m,f]=(0,s.useState)(0),[x,g]=(0,s.useState)(!0),[y,v]=(0,s.useState)("createdAt"),[j,b]=(0,s.useState)("desc");(0,s.useEffect)(()=>{N()},[e,y,j]);let k=e=>{let t=[...e];return t.sort((e,t)=>"price"===y?(e.price||0)-(t.price||0):"name"===y?(e.name||"").localeCompare(t.name||""):new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),"desc"===j&&t.reverse(),t},N=async()=>{g(!0);try{let t=await i.x.get("/store/categories/slug/".concat(e));if(t.data.data){let e=t.data.data;a(e);let r=[e.id];try{let t=(await i.x.get("/store/categories")).data.data||[],a=new Map;t.forEach(e=>{if(e.parentId){let t=a.get(e.parentId)||[];t.push(e),a.set(e.parentId,t)}});let s=[],n=[...a.get(e.id)||[]];for(;n.length>0;){let e=n.pop();if(!e)continue;s.push(e.id);let t=a.get(e.id)||[];n.push(...t)}s.length>0&&(r=[e.id,...s])}catch(e){console.error("Failed to fetch categories for descendants",e)}let s=await Promise.allSettled(r.map(e=>i.x.get("/store/categories/".concat(e,"/products?size=20&sortBy=").concat(y,"&sortDirection=").concat(j)))),n=[],c=0;s.forEach(e=>{var t;if("fulfilled"!==e.status)return;let a=e.value.data.data;n.push(...null!==(t=null==a?void 0:a.content)&&void 0!==t?t:[]),c+=(null==a?void 0:a.totalElements)||0});let l=new Map;n.forEach(e=>{l.has(e.id)||l.set(e.id,e)});let o=Array.from(l.values()),d=o.map(e=>e.id),u=new Map;if(d.length>0)try{let e=await i.x.post("/store/inventory/batch",d);u=new Map((e.data.data||[]).map(e=>[e.productId,e]))}catch(e){console.error("Failed to fetch inventory batch",e)}let h=o.map(e=>{let t=u.get(e.id);return t?{...e,stockQuantity:t.availableQuantity}:e});p(k(h)),f(c||h.length)}else throw Error("Category not found")}catch(e){console.error("Failed to fetch from API",e),a(null),p([]),f(0)}finally{g(!1)}};return x||t?(0,r.jsxs)("div",{className:"min-h-screen bg-cream",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"container-full py-4",children:(0,r.jsxs)("nav",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,r.jsx)(c.default,{href:"/",className:"hover:text-primary transition-colors",children:"Home"}),(0,r.jsx)(d.Z,{className:"h-4 w-4"}),(0,r.jsx)(c.default,{href:"/products",className:"hover:text-primary transition-colors",children:"Shop"}),(0,r.jsx)(d.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-primary",children:(null==t?void 0:t.name)||"Loading..."})]})})}),(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsxs)("div",{className:"container-full py-12",children:[(0,r.jsx)("h1",{className:"font-heading text-4xl md:text-5xl font-medium tracking-tight text-center",children:null==t?void 0:t.name}),(null==t?void 0:t.description)&&(0,r.jsx)("p",{className:"text-center text-gray-500 mt-3 max-w-xl mx-auto",children:t.description}),(0,r.jsxs)("p",{className:"text-center text-gray-400 text-sm mt-4",children:[m," ",1===m?"product":"products"]})]})}),(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-[88px] z-30",children:(0,r.jsx)("div",{className:"container-full py-4",children:(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("select",{value:"".concat(y,":").concat(j),onChange:e=>{let[t,a]=e.target.value.split(":");v(t),b(a)},className:"appearance-none bg-transparent text-sm tracking-wider uppercase pr-6 cursor-pointer focus:outline-none",children:[{value:"createdAt:desc",label:"Newest"},{value:"createdAt:asc",label:"Oldest"},{value:"price:asc",label:"Price: Low to High"},{value:"price:desc",label:"Price: High to Low"},{value:"name:asc",label:"Name: A-Z"}].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)(u.Z,{className:"absolute right-0 top-1/2 -translate-y-1/2 h-4 w-4 pointer-events-none"})]})})})}),(0,r.jsx)("div",{className:"container-full py-12",children:x?(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:Array.from({length:8}).map((e,t)=>(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Od,{className:"aspect-[3/4] w-full mb-4"}),(0,r.jsx)(l.Od,{className:"h-4 w-20 mb-2"}),(0,r.jsx)(l.Od,{className:"h-5 w-full mb-2"}),(0,r.jsx)(l.Od,{className:"h-4 w-16"})]},t))}):h&&0!==h.length?(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:h.map(e=>{var a,s;let n=null===(a=e.tags)||void 0===a?void 0:a.includes("new"),i=!!e.compareAtPrice;return(0,r.jsxs)(c.default,{href:"/products/".concat(e.slug),className:"group",children:[(0,r.jsxs)("div",{className:"relative aspect-[3/4] overflow-hidden img-zoom mb-4 bg-white",children:[(0,r.jsx)(l.TK,{src:(0,o.b6)(e)||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover",fallbackSrc:"/placeholder.svg"}),n&&(0,r.jsx)("span",{className:"absolute top-4 left-4 bg-primary text-white text-xs px-3 py-1 tracking-wider uppercase",children:"New"}),i&&(0,r.jsx)("span",{className:"absolute top-4 ".concat(n?"right-4":"left-4"," bg-primary text-white text-xs px-3 py-1 tracking-wider uppercase"),children:"Sale"}),"number"==typeof e.stockQuantity&&e.stockQuantity<=0&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm tracking-wider uppercase",children:"Out of Stock"})})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 tracking-wider uppercase",children:(null===(s=e.category)||void 0===s?void 0:s.name)||(null==t?void 0:t.name)}),(0,r.jsx)("h3",{className:"font-heading text-lg group-hover:opacity-70 transition-opacity",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:(0,o.xG)(e.price)}),e.compareAtPrice&&(0,r.jsx)("span",{className:"text-gray-400 line-through text-sm",children:(0,o.xG)(e.compareAtPrice)})]})]})]},e.id)})}):(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"No products in this category yet"}),(0,r.jsx)(c.default,{href:"/products",className:"text-sm text-primary underline",children:"Browse all products"})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-cream",children:(0,r.jsx)("div",{className:"container-full py-20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"font-heading text-4xl font-medium mb-4",children:"Category Not Found"}),(0,r.jsx)("p",{className:"text-gray-500 mb-8",children:"The category you're looking for doesn't exist."}),(0,r.jsx)(c.default,{href:"/products",className:"inline-flex items-center gap-2 bg-primary text-white px-8 py-4 text-sm tracking-wider uppercase hover:bg-black transition-colors",children:"Browse All Products"})]})})})}}},function(e){e.O(0,[2972,6853,5878,9714,2971,2117,1744],function(){return e(e.s=3449)}),_N_E=e.O()}]);