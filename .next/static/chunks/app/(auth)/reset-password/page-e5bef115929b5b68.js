(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5277],{5422:function(e,s,t){Promise.resolve().then(t.bind(t,7226))},2660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},401:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7769:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2208:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"notFound")&&t.d(s,{notFound:function(){return a.notFound}}),t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},7226:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var a=t(7437),r=t(2265),n=t(9376),i=t(7648),o=t(9501),l=t(5701),c=t(6548),u=t(6305),d=t(9714),m=t(9322),p=t(401),x=t(7769),h=t(2208),f=t(2660);function w(){var e,s;let t=(0,n.useRouter)(),w=(0,n.useSearchParams)().get("token"),[g,y]=(0,r.useState)(!1),[Z,b]=(0,r.useState)(!1),[_,P]=(0,r.useState)(null),{register:v,handleSubmit:N,watch:j,formState:{errors:R,isSubmitting:k}}=(0,o.cI)({resolver:(0,l.F)(c.S4)}),S=j("password",""),q=[{met:S.length>=8,text:"At least 8 characters"},{met:/[A-Z]/.test(S),text:"One uppercase letter"},{met:/[0-9]/.test(S),text:"One number"}];if(!w)return(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-error-bg rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(m.Z,{className:"h-8 w-8 text-error"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Reset Link"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This password reset link is invalid or has expired."}),(0,a.jsx)(i.default,{href:"/forgot-password",className:"inline-flex items-center text-primary font-medium hover:underline",children:"Request a new reset link"})]});let I=async e=>{P(null);try{await u.x.post("/auth/reset-password",{token:w,newPassword:e.password}),b(!0),setTimeout(()=>{t.push("/login")},2e3)}catch(e){var s,a;P((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to reset password. The link may have expired.")}};return Z?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-success-bg rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(p.Z,{className:"h-8 w-8 text-success"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Password reset successful!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Your password has been changed. You can now sign in with your new password."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to login..."})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-900 mb-2",children:"Reset your password"}),(0,a.jsx)("p",{className:"text-center text-gray-600 mb-8",children:"Enter your new password below."}),_&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-error-bg text-error rounded-lg text-sm",children:_}),(0,a.jsxs)("form",{onSubmit:N(I),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.II,{label:"New Password",type:g?"text":"password",placeholder:"Create a new password",error:null===(e=R.password)||void 0===e?void 0:e.message,...v("password")}),(0,a.jsx)("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600",children:g?(0,a.jsx)(x.Z,{className:"h-5 w-5"}):(0,a.jsx)(h.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"space-y-1",children:q.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2 ".concat(e.met?"text-success":"text-gray-300")}),(0,a.jsx)("span",{className:e.met?"text-success":"text-gray-500",children:e.text})]},s))}),(0,a.jsx)(d.II,{label:"Confirm Password",type:"password",placeholder:"Confirm your new password",error:null===(s=R.confirmPassword)||void 0===s?void 0:s.message,...v("confirmPassword")}),(0,a.jsx)(d.zx,{type:"submit",className:"w-full",size:"lg",isLoading:k,children:"Reset password"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)(i.default,{href:"/login",className:"inline-flex items-center text-sm text-gray-600 hover:text-primary",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Back to sign in"]})})]})}function g(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"text-center py-8",children:"Loading..."}),children:(0,a.jsx)(w,{})})}},6548:function(e,s,t){"use strict";t.d(s,{$h:function(){return u},ek:function(){return o},dm:function(){return n},gY:function(){return i},S4:function(){return l}});var a=t(7119);let r=/^[a-zA-Z0-9_]{3,30}$/,n=a.Ry({usernameOrEmail:a.Z_().min(1,"Username or email is required").refine(e=>a.Z_().email().safeParse(e).success||r.test(e),{message:"Must be a valid email or username"}),password:a.Z_().min(1,"Password is required")}),i=a.Ry({fullName:a.Z_().min(2,"Name must be at least 2 characters"),username:a.Z_().min(3,"Username must be at least 3 characters"),email:a.Z_().email("Invalid email address"),password:a.Z_().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:a.Z_(),acceptTerms:a.O7().refine(e=>!0===e,{message:"You must accept the terms and conditions"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),o=a.Ry({email:a.Z_().email("Invalid email address")}),l=a.Ry({password:a.Z_().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[0-9]/,"Password must contain at least one number"),confirmPassword:a.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});a.Ry({name:a.Z_().min(1,"Product name is required").max(255,"Name is too long"),description:a.Z_().optional(),price:a.Rx().positive("Price must be greater than 0"),compareAtPrice:a.Rx().positive("Compare price must be greater than 0").optional(),sku:a.Z_().min(1,"SKU is required").max(100,"SKU is too long"),categoryId:a.Z_().uuid("Please select a category"),active:a.O7().default(!0),featured:a.O7().default(!1),attributes:a.IM(a._4()).optional()}),a.Ry({discountPercentage:a.Rx().min(1,"Minimum 1%").max(99,"Maximum 99%"),startDate:a.Z_().optional(),endDate:a.Z_().optional()}),a.Ry({categoryId:a.Z_().uuid().optional(),applyToAll:a.O7().optional(),discountPercentage:a.Rx().min(1,"Minimum 1%").max(99,"Maximum 99%"),startDate:a.Z_().optional(),endDate:a.Z_().optional()}),a.Ry({name:a.Z_().min(1,"Category name is required").max(100,"Name is too long"),slug:a.Z_().regex(/^[a-z0-9-]*$/,"Slug must contain only lowercase letters, numbers, and hyphens").optional().or(a.i0("")),description:a.Z_().max(500,"Description is too long").optional(),parentId:a.Z_().uuid().nullable().optional(),displayOrder:a.Rx().int().min(0).default(0)});let c=a.Ry({street:a.Z_().min(1,"Street address is required"),city:a.Z_().min(1,"City is required"),region:a.Z_().min(1,"Region/State is required"),country:a.Z_().min(1,"Country is required"),postalCode:a.Z_().optional(),phone:a.Z_().min(1,"Phone number is required"),gps:a.Z_().optional()}),u=a.Ry({shippingAddress:c,guestEmail:a.Z_().email("Valid email is required").optional(),guestName:a.Z_().min(1,"Full name is required").optional(),createAccount:a.O7().optional().default(!1),password:a.Z_().min(8,"Password must be at least 8 characters").optional(),notes:a.Z_().max(500,"Notes too long").optional()}).refine(e=>!e.createAccount||!!e.password,{message:"Password is required to create an account",path:["password"]})}},function(e){e.O(0,[2972,6853,5878,2428,6572,9714,2971,2117,1744],function(){return e(e.s=5422)}),_N_E=e.O()}]);