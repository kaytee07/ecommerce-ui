"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5044],{875:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5466:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},7692:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6840:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},4794:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},3247:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8728:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2449:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]])},2369:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3145:function(e,t,a){a.d(t,{default:function(){return s.a}});var r=a(8461),s=a.n(r)},7648:function(e,t,a){a.d(t,{default:function(){return s.a}});var r=a(2972),s=a.n(r)},9376:function(e,t,a){var r=a(5475);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}}),a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},8461:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return n},getImageProps:function(){return c}});let r=a(7043),s=a(5346),l=a(5878),i=r._(a(5084));function c(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let n=l.Image},7926:function(e,t,a){a.r(t),a.d(t,{Footer:function(){return f}});var r=a(7437),s=a(2265),l=a(7648),i=a(3145),c=a(9205);let n=(0,c.Z)("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),o=(0,c.Z)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),d=(0,c.Z)("facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);var h=a(6305);let u=[{label:"All Products",href:"/products"},{label:"New Arrivals",href:"/collections/new-arrivals"}],m=[{label:"Contact Us",href:"/contact"},{label:"Shipping",href:"/shipping"},{label:"Returns",href:"/returns"},{label:"FAQ",href:"/faq"},{label:"Size Guide",href:"/size-guide"}],x=[{label:"About Us",href:"/about"},{label:"Careers",href:"/careers"},{label:"Privacy Policy",href:"/privacy"},{label:"Terms of Service",href:"/terms"}];function f(){let[e,t]=(0,s.useState)(u);return(0,s.useEffect)(()=>{(async()=>{try{let e=((await h.x.get("/store/categories")).data.data||[]).filter(e=>!1!==e.active).sort((e,t)=>(e.displayOrder||0)-(t.displayOrder||0)).slice(0,4).map(e=>({label:e.name,href:"/categories/".concat(e.slug)}));t([...u,...e])}catch(e){console.error("Failed to fetch categories for footer",e),t(u)}})()},[]),(0,r.jsxs)("footer",{className:"bg-primary text-white",children:[(0,r.jsx)("div",{className:"border-b border-white/10",children:(0,r.jsx)("div",{className:"container-full py-16",children:(0,r.jsxs)("div",{className:"max-w-xl mx-auto text-center",children:[(0,r.jsx)("h3",{className:"font-heading text-3xl mb-4",children:"Join the World"}),(0,r.jsx)("p",{className:"text-white/70 mb-6 text-sm tracking-wide",children:"Subscribe for exclusive drops, early access, and 10% off your first order."}),(0,r.jsxs)("form",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 bg-transparent border border-white/30 text-white placeholder:text-white/50 focus:border-white focus:outline-none"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 bg-white text-primary font-medium text-sm tracking-wider uppercase hover:bg-white/90 transition-colors",children:"Subscribe"})]})]})})}),(0,r.jsx)("div",{className:"container-full py-16",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsx)(l.default,{href:"/",children:(0,r.jsx)(i.default,{src:"/logo.png",alt:"World Genius",width:150,height:40,className:"h-10 w-auto brightness-0 invert mb-6"})}),(0,r.jsx)("p",{className:"text-white/70 text-sm leading-relaxed mb-6 max-w-xs",children:"Bold streetwear for the nonconformist. Designed in Ghana for the world."}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("a",{href:"https://instagram.com/worldg3nius",target:"_blank",rel:"noopener noreferrer",className:"p-2 border border-white/30 hover:border-white hover:bg-white hover:text-primary transition-all","aria-label":"Instagram",children:(0,r.jsx)(n,{className:"h-5 w-5"})}),(0,r.jsx)("a",{href:"https://twitter.com/worldg3nius",target:"_blank",rel:"noopener noreferrer",className:"p-2 border border-white/30 hover:border-white hover:bg-white hover:text-primary transition-all","aria-label":"Twitter",children:(0,r.jsx)(o,{className:"h-5 w-5"})}),(0,r.jsx)("a",{href:"https://facebook.com/worldg3nius",target:"_blank",rel:"noopener noreferrer",className:"p-2 border border-white/30 hover:border-white hover:bg-white hover:text-primary transition-all","aria-label":"Facebook",children:(0,r.jsx)(d,{className:"h-5 w-5"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-medium tracking-widest uppercase mb-6",children:"Shop"}),(0,r.jsx)("ul",{className:"space-y-3",children:e.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:e.href,className:"text-white/70 hover:text-white text-sm transition-colors",children:e.label})},e.href))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-medium tracking-widest uppercase mb-6",children:"Help"}),(0,r.jsx)("ul",{className:"space-y-3",children:m.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:e.href,className:"text-white/70 hover:text-white text-sm transition-colors",children:e.label})},e.href))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-medium tracking-widest uppercase mb-6",children:"Company"}),(0,r.jsx)("ul",{className:"space-y-3",children:x.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:e.href,className:"text-white/70 hover:text-white text-sm transition-colors",children:e.label})},e.href))})]})]})}),(0,r.jsx)("div",{className:"border-t border-white/10",children:(0,r.jsx)("div",{className:"container-full py-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,r.jsxs)("p",{className:"text-white/50 text-xs",children:["\xa9 ",new Date().getFullYear()," World Genius. All rights reserved."]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)("span",{className:"text-white/50 text-xs",children:"Ghana"}),(0,r.jsx)("span",{className:"text-white/50 text-xs",children:"GHS (â‚µ)"})]})]})})})]})}},7677:function(e,t,a){a.r(t),a.d(t,{Header:function(){return N}});var r=a(7437),s=a(2265),l=a(7648),i=a(3145),c=a(9376),n=a(5162),o=a(6305),d=a(2489),h=a(6840),u=a(3247),m=a(2369),x=a(875),f=a(5466);let p=(0,a(9205).Z)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);var g=a(4794),y=a(8728),b=a(7692),v=a(2449),j=a(7279);let w=[{href:"/products",label:"Shop All"},{href:"/collections/new-arrivals",label:"New Arrivals"}];function N(){var e,t;let a=(0,c.useRouter)(),[N,k]=(0,s.useState)(!1),[Z,C]=(0,s.useState)(!1),[S,A]=(0,s.useState)(w),M=(0,s.useRef)(null),{isAuthenticated:E,user:O,logout:P}=(0,n.t)(),{cart:_}=(0,n.x)(),F=(null==_?void 0:null===(e=_.items)||void 0===e?void 0:e.length)||0,z=null==O?void 0:null===(t=O.roles)||void 0===t?void 0:t.some(e=>["ROLE_SUPER_ADMIN","ROLE_CONTENT_MANAGER","ROLE_WAREHOUSE","ROLE_SUPPORT_AGENT"].includes(e));(0,s.useEffect)(()=>{(async()=>{try{let e=((await o.x.get("/store/categories")).data.data||[]).filter(e=>e.active).sort((e,t)=>(e.displayOrder||0)-(t.displayOrder||0)).map(e=>({href:"/categories/".concat(e.slug),label:e.name}));A([...w,...e])}catch(e){console.error("Failed to fetch categories for navigation",e),A(w)}})()},[]),(0,s.useEffect)(()=>{function e(e){M.current&&!M.current.contains(e.target)&&C(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let R=async()=>{await P(),C(!1),a.push("/")};return(0,r.jsxs)("header",{className:"sticky top-0 z-50 bg-cream",children:[(0,r.jsx)("div",{className:"bg-primary text-white text-center py-2 px-4",children:(0,r.jsx)("p",{className:"text-xs tracking-widest uppercase",children:"Free shipping on orders over GHS 500"})}),(0,r.jsxs)("nav",{className:"border-b border-gray-200",children:[(0,r.jsx)("div",{className:"container-full",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,r.jsx)("button",{onClick:()=>k(!N),className:"lg:hidden p-2 -ml-2","aria-label":"Toggle menu",children:N?(0,r.jsx)(d.Z,{className:"h-6 w-6"}):(0,r.jsx)(h.Z,{className:"h-6 w-6"})}),(0,r.jsx)(l.default,{href:"/",className:"lg:flex-shrink-0",children:(0,r.jsx)(i.default,{src:"/logo.png",alt:"World Genius",width:180,height:50,className:"h-10 lg:h-12 w-auto",priority:!0})}),(0,r.jsxs)("div",{className:"flex items-center gap-4 lg:gap-6",children:[(0,r.jsx)(l.default,{href:"/search",className:"p-2 hover:opacity-70 transition-opacity","aria-label":"Search",children:(0,r.jsx)(u.Z,{className:"h-5 w-5"})}),(0,r.jsx)("div",{className:"relative hidden sm:block",ref:M,children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>C(!Z),className:"flex items-center gap-1 p-2 hover:opacity-70 transition-opacity","aria-label":"User menu",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5"}),(0,r.jsx)(x.Z,{className:(0,j.cn)("h-3 w-3 transition-transform",Z&&"rotate-180")})]}),Z&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null==O?void 0:O.fullName)||(null==O?void 0:O.username)||"User"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==O?void 0:O.email})]}),z&&(0,r.jsxs)(l.default,{href:"/admin",onClick:()=>C(!1),className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),"Admin Dashboard"]}),(0,r.jsxs)(l.default,{href:"/account",onClick:()=>C(!1),className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)(p,{className:"h-4 w-4"}),"My Account"]}),(0,r.jsxs)(l.default,{href:"/account/orders",onClick:()=>C(!1),className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4"}),"My Orders"]}),(0,r.jsxs)(l.default,{href:"/account/profile",onClick:()=>C(!1),className:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4"}),"Settings"]}),(0,r.jsx)("div",{className:"border-t border-gray-100 mt-2 pt-2",children:(0,r.jsxs)("button",{onClick:R,className:"flex items-center gap-3 px-4 py-2 text-sm text-error hover:bg-gray-50 w-full text-left",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4"}),"Sign Out"]})})]})]}):(0,r.jsx)(l.default,{href:"/login",className:"p-2 hover:opacity-70 transition-opacity","aria-label":"Sign in",children:(0,r.jsx)(m.Z,{className:"h-5 w-5"})})}),(0,r.jsxs)(l.default,{href:"/cart",className:"p-2 hover:opacity-70 transition-opacity relative","aria-label":"Cart",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5"}),F>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center bg-primary text-white text-xs font-medium rounded-full",children:F>9?"9+":F})]})]})]})}),(0,r.jsx)("div",{className:"hidden lg:block border-t border-gray-100",children:(0,r.jsx)("div",{className:"container-full",children:(0,r.jsx)("div",{className:"flex items-center justify-center gap-12 h-12",children:S.map(e=>(0,r.jsx)(l.default,{href:e.href,className:"nav-link",children:e.label},e.href))})})})]}),(0,r.jsx)("div",{className:(0,j.cn)("lg:hidden fixed inset-0 z-50 bg-cream transition-transform duration-300",N?"translate-x-0":"-translate-x-full"),children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-20 px-6 border-b border-gray-200",children:[(0,r.jsx)(l.default,{href:"/",onClick:()=>k(!1),children:(0,r.jsx)(i.default,{src:"/logo.png",alt:"World Genius",width:150,height:40,className:"h-10 w-auto"})}),(0,r.jsx)("button",{onClick:()=>k(!1),className:"p-2","aria-label":"Close menu",children:(0,r.jsx)(d.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("nav",{className:"flex-1 px-6 py-8 overflow-y-auto",children:[(0,r.jsx)("ul",{className:"space-y-6",children:S.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:e.href,onClick:()=>k(!1),className:"block text-2xl font-heading font-medium tracking-tight hover:opacity-70 transition-opacity",children:e.label})},e.href))}),E&&z&&(0,r.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs tracking-[0.2em] uppercase text-gray-500 mb-4",children:"Admin"}),(0,r.jsxs)(l.default,{href:"/admin",onClick:()=>k(!1),className:"flex items-center gap-3 text-lg font-medium hover:opacity-70 transition-opacity",children:[(0,r.jsx)(f.Z,{className:"h-5 w-5"}),"Dashboard"]})]})]}),(0,r.jsx)("div",{className:"px-6 py-8 border-t border-gray-200",children:E?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"pb-4 border-b border-gray-100",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:(null==O?void 0:O.fullName)||(null==O?void 0:O.username)||"User"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:null==O?void 0:O.email})]}),(0,r.jsxs)(l.default,{href:"/account",onClick:()=>k(!1),className:"flex items-center gap-3 text-sm tracking-wider uppercase hover:opacity-70",children:[(0,r.jsx)(p,{className:"h-4 w-4"}),"My Account"]}),(0,r.jsxs)(l.default,{href:"/account/orders",onClick:()=>k(!1),className:"flex items-center gap-3 text-sm tracking-wider uppercase hover:opacity-70",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4"}),"My Orders"]}),(0,r.jsxs)("button",{onClick:()=>{R(),k(!1)},className:"flex items-center gap-3 text-sm tracking-wider uppercase text-error hover:opacity-70",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4"}),"Sign Out"]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(l.default,{href:"/login",onClick:()=>k(!1),className:"block text-sm tracking-wider uppercase hover:opacity-70",children:"Sign In"}),(0,r.jsx)(l.default,{href:"/register",onClick:()=>k(!1),className:"block text-sm tracking-wider uppercase hover:opacity-70",children:"Create Account"})]})})]})})]})}},5162:function(e,t,a){a.d(t,{t:function(){return r.t},x:function(){return i}});var r=a(8488),s=a(3011),l=a(6305);let i=(0,s.U)((e,t)=>({cart:null,isLoading:!1,error:null,fetchCart:async()=>{e({isLoading:!0,error:null});try{let t=await l.x.get("/store/cart");e({cart:t.data.data})}catch(t){e({error:"Failed to load cart"})}finally{e({isLoading:!1})}},addItem:async(t,a,r)=>{e({isLoading:!0,error:null});try{let s=await l.x.post("/store/cart/items",{productId:t,quantity:a,selectedOptions:r});e({cart:s.data.data})}catch(t){var s,i,c;throw"INSUFFICIENT_STOCK"===(null===(c=t.response)||void 0===c?void 0:null===(i=c.data)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.errorCode)?e({error:"Not enough stock available"}):e({error:"Failed to add item"}),t}finally{e({isLoading:!1})}},updateQuantity:async(a,r,s,i)=>{let c=t().cart,n=e=>s?e.itemKey===s:e.productId===a;c&&e({cart:{...c,items:c.items.map(e=>n(e)?{...e,quantity:r,subtotal:e.priceAtAdd*r}:e),totalAmount:c.items.reduce((e,t)=>n(t)?e+t.priceAtAdd*r:e+t.subtotal,0)}});try{let t=await l.x.put("/store/cart/items/".concat(a),{quantity:r,itemKey:s,selectedOptions:i});e({cart:t.data.data})}catch(t){throw e({cart:c,error:"Failed to update quantity"}),t}},removeItem:async(a,r)=>{let s=t().cart,i=e=>r?e.itemKey===r:e.productId===a;if(s){let t=s.items.filter(e=>!i(e));e({cart:{...s,items:t,itemCount:t.length,totalAmount:t.reduce((e,t)=>e+t.subtotal,0)}})}try{let t=r?"?itemKey=".concat(encodeURIComponent(r)):"",s=await l.x.delete("/store/cart/items/".concat(a).concat(t));e({cart:s.data.data})}catch(t){throw e({cart:s,error:"Failed to remove item"}),t}},clearCart:async()=>{try{await l.x.post("/store/cart/clear"),e({cart:null})}catch(t){throw e({error:"Failed to clear cart"}),t}},clearError:()=>e({error:null})}))}}]);