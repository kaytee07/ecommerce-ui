(()=>{var e={};e.id=170,e.ids=[170],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},73864:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),s(47418),s(9457),s(64968),s(35866);var r=s(23191),a=s(88716),l=s(37922),n=s.n(l),i=s(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["admin",{children:["payments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,47418)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/payments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,64968)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/payments/page.tsx"],x="/admin/payments/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/payments/page",pathname:"/admin/payments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},83473:(e,t,s)=>{Promise.resolve().then(s.bind(s,83927))},69669:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},48998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},12714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},36283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},91468:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},57671:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},83927:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(10326),a=s(17577),l=s(35047),n=s(55137),i=s(24660),c=s(63171),d=s(48998),o=s(30361),x=s(69669),u=s(91468),m=s(88307),p=s(94019),y=s(28916),h=s(12714),g=s(75248),f=s(68230);let j={PENDING:{label:"Pending",color:"bg-yellow-100 text-yellow-800",icon:d.Z},SUCCESS:{label:"Success",color:"bg-green-100 text-green-800",icon:o.Z},FAILED:{label:"Failed",color:"bg-red-100 text-red-800",icon:x.Z},REFUNDED:{label:"Refunded",color:"bg-gray-100 text-gray-800",icon:u.Z}};function b(){(0,l.useRouter)();let{user:e}=(0,g.t)(),t=(0,a.useMemo)(()=>e?(0,f.Zu)(e.roles):null,[e?.roles?.join("|")]);(0,a.useRef)(null);let[s,d]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[b,N]=(0,a.useState)(null),[v,w]=(0,a.useState)("all"),[k,C]=(0,a.useState)(""),[P,Z]=(0,a.useState)(null),[S,q]=(0,a.useState)(null),[M,E]=(0,a.useState)({}),U=(0,a.useRef)(!1),_=(0,a.useCallback)(async()=>{x(!0),q(null);try{let e="all"===v?"/admin/payments":`/admin/payments/status/${v}`,t=await n.x.get(e);d(t.data.data?.content||t.data.data||[])}catch(e){console.error("Failed to fetch payments",e),d([]),q("Failed to load payments.")}finally{x(!1)}},[v]);(0,a.useCallback)(async()=>{if(!U.current)try{let e=new URLSearchParams;e.set("size","1000");let t=await n.x.get(`/admin/users?${e.toString()}`),s=t.data.data?.content||t.data.data||[],r={};s.forEach(e=>{e?.id&&e?.username&&(r[e.id]=e.username)}),E(r),U.current=!0}catch(e){console.error("Failed to fetch users for payment display",e)}},[]);let D=async e=>{Z(e),q(null);try{await n.x.post(`/admin/payments/${e}/verify`),_()}catch(e){console.error("Failed to verify payment",e),q("Failed to verify payment.")}finally{Z(null)}},I=s.filter(e=>{let t=k.toLowerCase(),s=e.customerUsername||e.customerName||M[e.userId]||e.userId;return e.orderId.toLowerCase().includes(t)||s.toLowerCase().includes(t)||(e.transactionRef||"").toLowerCase().includes(t)}),z=e=>new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return e&&!t?.canViewPayments?null:o?(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(i.Od,{className:"h-10 w-64"}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[1,2,3,4,5].map(e=>r.jsx(i.Od,{className:"h-16 w-full mb-2"},e))})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payments"})}),S&&r.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:S}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx(m.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by order, customer, or reference...",value:k,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,r.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"SUCCESS",children:"Success"}),r.jsx("option",{value:"FAILED",children:"Failed"}),r.jsx("option",{value:"REFUNDED",children:"Refunded"})]})]}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Payment Details"}),r.jsx("button",{onClick:()=>N(null),className:"text-gray-400 hover:text-gray-600",children:r.jsx(p.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Transaction Ref"}),r.jsx("span",{className:"font-mono",children:b.transactionRef||"—"})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Order"}),r.jsx("span",{className:"font-medium",children:b.orderNumber||b.orderCode?(0,c.C7)(b.orderNumber||b.orderCode||""):b.orderId.slice(0,8).toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Customer"}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"font-medium",children:b.customerUsername||b.customerName||M[b.userId]||b.userId})})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-semibold text-lg",children:(0,c.xG)(b.amount)})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Gateway"}),r.jsx("span",{children:b.gateway})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),r.jsx("span",{className:(0,c.cn)("px-2 py-1 text-xs rounded-full",j[b.status].color),children:j[b.status].label})]}),(0,r.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[r.jsx("span",{className:"text-gray-500",children:"Date"}),r.jsx("span",{children:z(b.createdAt)})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:["PENDING"===b.status&&(0,r.jsxs)(i.zx,{onClick:()=>D(b.id),disabled:P===b.id,className:"flex-1",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Verify Payment"]}),r.jsx(i.zx,{variant:"outline",onClick:()=>N(null),className:"flex-1",children:"Close"})]})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gateway"}),r.jsx("th",{className:"text-center px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:0===I.length?r.jsx("tr",{children:(0,r.jsxs)("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(y.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No payments found"})]})}):I.map(e=>{let t=j[e.status].icon,s=e.orderNumber||e.orderCode?(0,c.C7)(e.orderNumber||e.orderCode||""):e.orderId.slice(0,8).toUpperCase();return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-mono text-sm",children:e.transactionRef||"—"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm font-medium",children:s})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.customerUsername||e.customerName||M[e.userId]||e.userId})}),r.jsx("td",{className:"px-6 py-4 text-right font-semibold",children:(0,c.xG)(e.amount)}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-sm",children:e.gateway})}),r.jsx("td",{className:"px-6 py-4 text-center",children:(0,r.jsxs)("span",{className:(0,c.cn)("inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full",j[e.status].color),children:[r.jsx(t,{className:"h-3 w-3"}),j[e.status].label]})}),r.jsx("td",{className:"px-6 py-4 text-right text-sm text-gray-500",children:z(e.createdAt)}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("button",{onClick:()=>N(e),className:"p-2 text-gray-400 hover:text-primary rounded-lg hover:bg-gray-100",children:r.jsx(h.Z,{className:"h-4 w-4"})})})]},e.id)})})]})})})]})}},47418:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/payments/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9977,2948,1984,4660,889],()=>s(73864));module.exports=r})();