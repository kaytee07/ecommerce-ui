(()=>{var e={};e.id=3180,e.ids=[3180],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},14953:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(93492),s(9457),s(64968),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["admin",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,93492)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/inventory/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,64968)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/inventory/page.tsx"],u="/admin/inventory/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/inventory/page",pathname:"/admin/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},58932:(e,t,s)=>{Promise.resolve().then(s.bind(s,96760))},36283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},11019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},57671:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},96760:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(10326),a=s(17577),n=s(35047),i=s(55137),l=s(24660),o=s(88307),c=s(50949),d=s(11019),u=s(83855),x=s(63171),p=s(75248),m=s(68230);function y(){let e="true"===(0,n.useSearchParams)().get("lowStock");(0,n.useRouter)();let{user:t}=(0,p.t)(),s=(0,a.useMemo)(()=>t?(0,m.Zu)(t.roles):null,[t?.roles?.join("|")]);(0,a.useRef)(null);let[y,h]=(0,a.useState)([]),[g,j]=(0,a.useState)({}),[f,v]=(0,a.useState)(!0),[b,N]=(0,a.useState)(""),[k,w]=(0,a.useState)(e),[S,q]=(0,a.useState)({open:!1,item:null}),[A,C]=(0,a.useState)({amount:0,reason:"",adjustmentType:"ADJUSTMENT"}),[M,P]=(0,a.useState)(!1),I=(0,a.useRef)(!1),T=(0,a.useCallback)(async()=>{v(!0);try{let e=k?"/admin/inventory/low-stock":"/admin/inventory",t=await i.x.get(e);h(t.data.data||[])}catch(e){console.error("Failed to fetch inventory",e),h([])}finally{v(!1)}},[k]);(0,a.useCallback)(async()=>{if(!I.current)try{let e=new URLSearchParams;e.set("size","1000");let t=await i.x.get(`/admin/products?${e.toString()}`),s=t.data.data?.content||t.data.data||[],r={};s.forEach(e=>{e?.id&&(r[e.id]={name:e.name,sku:e.sku})}),j(r),I.current=!0}catch(e){console.error("Failed to fetch product info for inventory",e)}},[]);let E=async()=>{if(S.item&&A.reason&&s?.canAdjustInventory){P(!0);try{await i.x.post(`/admin/inventory/${S.item.productId}/adjust`,{quantity:A.amount,adjustmentType:A.adjustmentType,reason:A.reason}),await T(),q({open:!1,item:null}),C({amount:0,reason:"",adjustmentType:"ADJUSTMENT"})}catch(e){console.error("Failed to adjust inventory",e)}finally{P(!1)}}},Z=(y||[]).filter(e=>{let t=b.toLowerCase(),s=g[e.productId];return(e.productId||"").toLowerCase().includes(t)||(e.productName||s?.name||"").toLowerCase().includes(t)||(e.sku||s?.sku||"").toLowerCase().includes(t)});return t&&!s?.canViewInventory?null:(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Inventory"})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx("input",{type:"search",placeholder:"Search by product or SKU...",value:b,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-primary focus:ring-1 focus:ring-primary"}),r.jsx(o.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),(0,r.jsxs)("label",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:k,onChange:e=>w(e.target.checked),className:"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary"}),r.jsx(c.Z,{className:"h-4 w-4 text-warning"}),r.jsx("span",{className:"text-sm",children:"Low stock only"})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"In Stock"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reserved"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Available"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:f?Array.from({length:5}).map((e,t)=>r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-4",children:r.jsx(l.Od,{className:"h-12 w-full"})})},t)):0===Z.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:k?"No low stock items found":"No inventory records found"})}):Z.map(e=>{let t=e.availableQuantity<=5,a=e.availableQuantity<=0;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-gray-900",children:e.productName||g[e.productId]?.name||e.productId}),r.jsx("div",{className:"text-xs text-gray-500 font-mono",children:e.sku||g[e.productId]?.sku||"â€”"})]}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.stockQuantity}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.reservedQuantity}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:(0,x.cn)("font-medium",a?"text-error":t?"text-warning":"text-gray-900"),children:e.availableQuantity})}),r.jsx("td",{className:"px-6 py-4",children:a?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-error-bg text-error",children:"Out of Stock"}):t?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-warning-bg text-warning",children:"Low Stock"}):r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-success-bg text-success",children:"In Stock"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx(l.zx,{variant:"outline",size:"sm",onClick:()=>{s?.canAdjustInventory&&(q({open:!0,item:e}),C({amount:0,reason:"",adjustmentType:"ADJUSTMENT"}))},disabled:!s?.canAdjustInventory,children:"Adjust"})})]},e.id)})})]})})}),r.jsx(l.u_,{isOpen:S.open,onClose:()=>q({open:!1,item:null}),title:"Adjust Stock",size:"sm",children:S.item&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Product"}),r.jsx("p",{className:"font-medium",children:S.item.productName||g[S.item.productId]?.name||S.item.productId})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Current Stock"}),r.jsx("p",{className:"font-medium",children:S.item.stockQuantity})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Adjustment"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>C(e=>({...e,amount:e.amount-1})),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:r.jsx(d.Z,{className:"h-4 w-4"})}),r.jsx("input",{type:"number",value:A.amount,onChange:e=>C(t=>({...t,amount:parseInt(e.target.value)||0})),className:"w-24 px-3 py-2 border border-gray-300 rounded-lg text-center focus:border-primary focus:ring-1 focus:ring-primary"}),r.jsx("button",{type:"button",onClick:()=>C(e=>({...e,amount:e.amount+1})),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:r.jsx(u.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["New stock: ",S.item.stockQuantity+A.amount]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Adjustment Type"}),(0,r.jsxs)("select",{value:A.adjustmentType,onChange:e=>C(t=>({...t,adjustmentType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-primary focus:ring-1 focus:ring-primary",children:[r.jsx("option",{value:"ADJUSTMENT",children:"Adjustment"}),r.jsx("option",{value:"RESTOCK",children:"Restock"}),r.jsx("option",{value:"SALE",children:"Sale"}),r.jsx("option",{value:"RESERVE",children:"Reserve"}),r.jsx("option",{value:"RELEASE",children:"Release"})]})]}),r.jsx(l.II,{label:"Reason (required)",placeholder:"e.g., Restock from supplier",value:A.reason,onChange:e=>C(t=>({...t,reason:e.target.value}))}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[r.jsx(l.zx,{variant:"outline",onClick:()=>q({open:!1,item:null}),children:"Cancel"}),r.jsx(l.zx,{onClick:E,disabled:0===A.amount||!A.reason,isLoading:M,children:"Apply Adjustment"})]})]})})]})}function h(){return r.jsx(a.Suspense,{fallback:r.jsx("div",{className:"space-y-6",children:r.jsx(l.Od,{className:"h-96 w-full"})}),children:r.jsx(y,{})})}},93492:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/inventory/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9977,2948,1984,4660,889],()=>s(14953));module.exports=r})();