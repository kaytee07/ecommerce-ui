(()=>{var e={};e.id=4122,e.ids=[4122],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},5496:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>d}),s(65643),s(9457),s(64968),s(35866);var a=s(23191),r=s(88716),l=s(37922),i=s.n(l),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,65643)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/products/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9457)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,64968)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/products/page.tsx"],u="/admin/products/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},42638:(e,t,s)=>{Promise.resolve().then(s.bind(s,26817))},36283:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},77506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},57671:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},98091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},63685:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},26817:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(10326),r=s(17577),l=s(35047),i=s(46226),n=s(90434),c=s(55137),d=s(24660),o=s(63171),u=s(83855),p=s(88307),x=s(71709);let m=(0,s(62881).Z)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var h=s(98091),y=s(75248),g=s(68230);function f(){(0,l.useRouter)();let{user:e}=(0,y.t)(),t=(0,r.useMemo)(()=>e?(0,g.Zu)(e.roles):null,[e?.roles?.join("|")]);(0,r.useRef)(null);let[s,f]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),[b,N]=(0,r.useState)(!0),[k,w]=(0,r.useState)(""),[P,S]=(0,r.useState)(""),[C,q]=(0,r.useState)({}),[M,Z]=(0,r.useState)({open:!1,product:null}),[A,_]=(0,r.useState)(!1),[z,D]=(0,r.useState)(!1),[I,L]=(0,r.useState)(!1),[U,E]=(0,r.useState)(""),[H,F]=(0,r.useState)(""),[G,O]=(0,r.useState)(""),[$,R]=(0,r.useState)(""),[T,V]=(0,r.useState)(null),[B,K]=(0,r.useState)(!1),Q=(0,r.useCallback)(async()=>{N(!0);try{let e=new URLSearchParams;e.set("size","200");let[t,s]=await Promise.all([c.x.get(`/admin/products?${e.toString()}`),c.x.get("/admin/categories")]),a=(t.data.data?.content||[]).filter(e=>{let t=!k||e.name.toLowerCase().includes(k.toLowerCase())||e.sku?.toLowerCase().includes(k.toLowerCase()),s=!P||e.categoryId===P;return t&&s});f(a),v(s.data.data||[]);let r=a.map(e=>e.id);if(r.length>0)try{let e=await c.x.post("/admin/inventory/batch",r),t={};(e.data.data||[]).forEach(e=>{t[e.productId]=e}),q(e=>({...e,...t}))}catch(e){console.error("Failed to fetch inventory batch",e)}}catch(e){console.error("Failed to fetch products",e),f([])}finally{N(!1)}},[k,P]),X=async()=>{if(M.product){_(!0);try{await c.x.delete(`/admin/products/${M.product.id}`),f(s.filter(e=>e.id!==M.product?.id)),Z({open:!1,product:null})}catch(e){console.error("Failed to delete product",e)}finally{_(!1)}}},J=e=>{if(e)return 16===e.length?`${e}:00`:e},W=async()=>{V(null),K(!0);try{let e=Number(H);if(Number.isNaN(e)){V("Discount percentage is required.");return}if(!I&&!U){V("Select a category or choose apply to all.");return}let t={discountPercentage:e,applyToAll:I};!I&&U&&(t.categoryId=U);let s=J(G),a=J($);s&&(t.startDate=s),a&&(t.endDate=a),await c.x.post("/admin/products/bulk-discount",t),D(!1),F(""),O(""),R(""),await Q()}catch(e){V(e.response?.data?.message||"Failed to apply bulk discount.")}finally{K(!1)}};return e&&!t?.canViewAdminProducts?null:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(d.zx,{variant:"outline",onClick:()=>D(e=>!e),children:"Bulk Discount"}),a.jsx(n.default,{href:"/admin/products/new",children:(0,a.jsxs)(d.zx,{children:[a.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Add Product"]})})]})]}),z&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Apply Bulk Discount"}),a.jsx(d.zx,{variant:"outline",onClick:()=>D(!1),children:"Close"})]}),T&&a.jsx("div",{className:"mb-4 p-3 bg-error-bg text-error rounded-lg text-sm",children:T}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[a.jsx(d.II,{label:"Discount %",type:"number",step:"0.01",min:"0",max:"100",value:H,onChange:e=>F(e.target.value)}),a.jsx(d.Ph,{label:"Category",options:[{value:"",label:"Select category"},...j.map(e=>({value:e.id,label:e.name}))],value:U,onChange:e=>E(e.target.value),disabled:I}),a.jsx(d.II,{label:"Start Date (Optional)",type:"datetime-local",value:G,onChange:e=>O(e.target.value)}),a.jsx(d.II,{label:"End Date (Optional)",type:"datetime-local",value:$,onChange:e=>R(e.target.value)})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("input",{type:"checkbox",checked:I,onChange:e=>L(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),"Apply to all products"]}),a.jsx(d.zx,{onClick:W,isLoading:B,disabled:""===H.trim(),children:"Apply Discount"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx("input",{type:"search",placeholder:"Search products...",value:k,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:border-primary focus:ring-1 focus:ring-primary"}),a.jsx(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]}),a.jsx(d.Ph,{options:[{value:"",label:"All Categories"},...j.map(e=>({value:e.id,label:e.name}))],value:P,onChange:e=>S(e.target.value),className:"w-48"})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:b?Array.from({length:5}).map((e,t)=>a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-4",children:a.jsx(d.Od,{className:"h-12 w-full"})})},t)):s&&0!==s.length?s.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:(0,o.b6)(e)?a.jsx(i.default,{src:(0,o.b6)(e),alt:e.name,width:48,height:48,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(x.Z,{className:"h-5 w-5 text-gray-400"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 line-clamp-1",children:e.name}),e.featured&&a.jsx(d.Ct,{variant:"warning",className:"mt-1",children:"Featured"})]})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:e.sku}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.categoryName}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"font-medium text-gray-900",children:(0,o.xG)(e.price)}),e.discountPercentage&&(0,a.jsxs)("p",{className:"text-xs text-error",children:["-",e.discountPercentage,"%"]})]}),a.jsx("td",{className:"px-6 py-4 text-gray-500",children:C[e.id]?.availableQuantity??"â€”"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(d.Ct,{variant:e.active?"success":"default",children:e.active?"Active":"Inactive"})}),a.jsx("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[a.jsx(n.default,{href:`/admin/products/${e.id}`,className:"p-2 text-gray-400 hover:text-primary",children:a.jsx(m,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>Z({open:!0,product:e}),className:"p-2 text-gray-400 hover:text-error",children:a.jsx(h.Z,{className:"h-4 w-4"})})]})})]},e.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No products found"})})})]})})}),a.jsx(d.sm,{isOpen:M.open,onClose:()=>Z({open:!1,product:null}),onConfirm:X,title:"Delete Product",message:`Are you sure you want to delete "${M.product?.name}"? This action cannot be undone.`,confirmText:"Delete",variant:"danger",isLoading:A})]})}},65643:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/admin/products/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9977,2948,1984,4660,889],()=>s(5496));module.exports=a})();