(()=>{var e={};e.id=8574,e.ids=[8574],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},22569:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),t(20183),t(21838),t(35866),t(64968);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["(account)",{children:["account",{children:["orders",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,20183)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/(account)/account/orders/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,21838)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/(account)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,64968)),"/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/(account)/account/orders/[id]/page.tsx"],x="/(account)/account/orders/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(account)/account/orders/[id]/page",pathname:"/account/orders/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55838:(e,s,t)=>{Promise.resolve().then(t.bind(t,49950))},94343:(e,s,t)=>{Promise.resolve().then(t.bind(t,18359))},86333:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},69669:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},48998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},28916:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},36283:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},77506:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},77636:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},91468:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},57671:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},63685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(62881).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},49950:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(10326),a=t(17577),i=t(35047),l=t(46226),n=t(90434),c=t(55137),d=t(24660),o=t(63171),x=t(86333),p=t(28916),h=t(41291),u=t(30361),m=t(48998),y=t(69669),g=t(77506),f=t(91468);function j(){let e=e=>`${e.productId}-${JSON.stringify(e.selectedOptions||{})}`,s=(0,i.useParams)(),t=(0,i.useRouter)();(0,i.useSearchParams)();let j=s.id,[N,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[k,P]=(0,a.useState)(!0),[Z,A]=(0,a.useState)(!1),[S,q]=(0,a.useState)(null),[C,M]=(0,a.useState)(!1),[U,O]=(0,a.useState)({}),z=async()=>{try{let e=await c.x.get(`/store/orders/${j}`);b(e.data.data)}catch(e){console.error("Failed to fetch order",e),t.push("/account/orders")}finally{P(!1)}},E=async()=>{if(v?.id&&!Z){A(!0),q(null);try{let e=await c.x.get(`/store/payments/${v.id}/verify`);w(e.data.data),M(!0),e.data.data?.status==="SUCCESS"&&await z()}catch(e){console.error("Failed to verify payment",e),q(e.response?.data?.message||"Failed to verify payment status")}finally{A(!1)}}},_=async()=>{try{let e=await c.x.post(`/store/payments/${j}/initiate`,{orderId:j,idempotencyKey:crypto.randomUUID(),callbackUrl:`${window.location.origin}/account/orders/${j}?verify=true`});e.data.data?.checkoutUrl&&(window.location.href=e.data.data.checkoutUrl)}catch(e){console.error("Failed to initiate payment",e),q(e.response?.data?.message||"Failed to initiate payment")}};return k?(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(d.Od,{className:"h-8 w-48"}),r.jsx(d.Od,{className:"h-64 w-full rounded-lg"}),r.jsx(d.Od,{className:"h-48 w-full rounded-lg"})]}):N?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(n.default,{href:"/account/orders",className:"p-2 text-gray-400 hover:text-primary",children:r.jsx(x.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Order ",N.id.slice(0,8).toUpperCase()]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Placed on ",(0,o.p6)(N.createdAt)]})]})]}),r.jsx(d.OE,{status:N.status})]}),v&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(p.Z,{className:"h-5 w-5 text-gray-400"}),r.jsx("h2",{className:"font-semibold text-gray-900",children:"Payment Status"})]}),S&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-error-bg text-error rounded-lg text-sm flex items-center gap-2",children:[r.jsx(h.Z,{className:"h-4 w-4 flex-shrink-0"}),S]}),v?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-500",children:"Status"}),(0,r.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"SUCCESS"===v.status?"bg-green-100 text-green-800":"PENDING"===v.status?"bg-yellow-100 text-yellow-800":"FAILED"===v.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:["SUCCESS"===v.status&&r.jsx(u.Z,{className:"h-4 w-4 inline mr-1"}),"PENDING"===v.status&&r.jsx(m.Z,{className:"h-4 w-4 inline mr-1"}),"FAILED"===v.status&&r.jsx(y.Z,{className:"h-4 w-4 inline mr-1"}),v.status]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Amount"}),r.jsx("span",{className:"font-semibold",children:(0,o.xG)(v.amount)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Gateway"}),r.jsx("span",{children:v.gateway})]}),v.transactionRef&&(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Reference"}),r.jsx("span",{className:"font-mono text-sm",children:v.transactionRef})]}),v.failureReason&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:[r.jsx("strong",{children:"Failed:"})," ",v.failureReason]}),C&&"SUCCESS"===v.status&&(0,r.jsxs)("div",{className:"mt-3 p-3 bg-green-50 text-green-700 rounded-lg text-sm flex items-center gap-2",children:[r.jsx(u.Z,{className:"h-4 w-4"}),"Payment verified successfully"]}),(0,r.jsxs)("div",{className:"mt-4 flex gap-3",children:["PENDING"===v.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.zx,{onClick:E,disabled:Z,variant:"outline",className:"flex-1",children:[Z?r.jsx(g.Z,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(f.Z,{className:"h-4 w-4 mr-2"}),"Check Status"]}),v.checkoutUrl&&r.jsx(d.zx,{onClick:()=>window.location.href=v.checkoutUrl,className:"flex-1",children:"Complete Payment"})]}),"FAILED"===v.status&&r.jsx(d.zx,{onClick:_,className:"flex-1",children:"Retry Payment"})]})]}):null]}),!v&&"PENDING"===N.status&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"No payment found for this order yet."}),r.jsx(d.zx,{onClick:_,children:"Pay Now"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"font-semibold text-gray-900",children:"Order Items"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:N.items.map(s=>(0,r.jsxs)("div",{className:"flex gap-4 p-6",children:[r.jsx("div",{className:"relative w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center text-gray-400 text-xs",children:U[s.productId]?r.jsx(l.default,{src:U[s.productId],alt:s.productName,fill:!0,sizes:"80px",className:"object-cover"}):"No Image"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:s.productName}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",s.sku]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",s.quantity]}),s.selectedOptions&&Object.keys(s.selectedOptions).length>0&&r.jsx("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:Object.entries(s.selectedOptions).map(([e,s])=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"uppercase tracking-wider text-gray-400",children:e}),r.jsx("span",{className:"font-medium text-gray-600",children:s})]},e))})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:(0,o.xG)(s.subtotal)}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,o.xG)(s.priceAtOrder)," each"]})]})]},e(s)))}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:r.jsx("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-gray-900 pt-2 border-t border-gray-200",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:(0,o.xG)(N.totalAmount)})]})})})]}),N.shippingAddress&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h2",{className:"font-semibold text-gray-900 mb-4",children:"Shipping Address"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[N.shippingAddress.street&&r.jsx("p",{children:N.shippingAddress.street}),(N.shippingAddress.city||N.shippingAddress.region)&&(0,r.jsxs)("p",{children:[N.shippingAddress.city,N.shippingAddress.city&&N.shippingAddress.region?", ":"",N.shippingAddress.region]}),N.shippingAddress.country&&r.jsx("p",{children:N.shippingAddress.country}),N.shippingAddress.postalCode&&(0,r.jsxs)("p",{children:["Postal Code: ",N.shippingAddress.postalCode]}),N.shippingAddress.phone&&(0,r.jsxs)("p",{children:["Phone: ",N.shippingAddress.phone]}),N.shippingAddress.gps&&(0,r.jsxs)("p",{children:["GPS: ",N.shippingAddress.gps]})]})]})]}):null}},18359:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(10326);t(17577);var a=t(35047),i=t(90434),l=t(75248),n=t(54075),c=t(56285),d=t(24660),o=t(79635),x=t(48705),p=t(77636),h=t(88378),u=t(71810),m=t(63171);let y=[{href:"/account",label:"Overview",icon:o.Z},{href:"/account/orders",label:"Orders",icon:x.Z},{href:"/account/addresses",label:"Addresses",icon:p.Z},{href:"/account/profile",label:"Settings",icon:h.Z}];function g({children:e}){(0,a.useRouter)();let s=(0,a.usePathname)(),{isAuthenticated:t,isLoading:o,user:x,logout:p}=(0,l.t)();return o?r.jsx(d.AA,{}):t?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Header,{}),r.jsx("main",{className:"flex-1 bg-gray-50",children:r.jsx("div",{className:"container-wide py-8",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsx("aside",{className:"lg:w-64 flex-shrink-0",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h2",{className:"font-semibold text-gray-900",children:x?.fullName}),r.jsx("p",{className:"text-sm text-gray-500",children:x?.email})]}),(0,r.jsxs)("nav",{className:"space-y-1",children:[y.map(e=>{let t=e.icon,a=s===e.href||"/account"!==e.href&&s.startsWith(e.href);return(0,r.jsxs)(i.default,{href:e.href,className:(0,m.cn)("flex items-center gap-3 px-3 py-2 rounded-lg transition-colors",a?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"),children:[r.jsx(t,{className:"h-5 w-5"}),e.label]},e.href)}),(0,r.jsxs)("button",{onClick:()=>p(),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-error hover:bg-error-bg w-full",children:[r.jsx(u.Z,{className:"h-5 w-5"}),"Sign out"]})]})]})}),r.jsx("div",{className:"flex-1 min-w-0",children:e})]})})}),r.jsx(c.Footer,{})]}):null}},20183:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/(account)/account/orders/[id]/page.tsx#default`)},21838:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/kofitaylor/business/ecommerce-engine-frontend/src/app/(account)/layout.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9977,2948,1984,4660,1094],()=>t(22569));module.exports=r})();