exports.id=1984,exports.ids=[1984],exports.modules={47633:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},57223:(e,t,r)=>{Promise.resolve().then(r.bind(r,72461))},72461:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>d});var a=r(10326),s=r(74951),i=r(44976),n=r(17577),o=r(75367),l=r(35047),c=r(75248);function u(){(0,l.useRouter)(),(0,l.usePathname)();let{user:e,isAuthenticated:t,isLoading:r}=(0,c.t)();return(0,n.useRef)(!1),null}function d({children:e}){let[t]=(0,n.useState)(()=>new s.S({defaultOptions:{queries:{staleTime:3e5,gcTime:18e5,refetchOnWindowFocus:!1,retry:1}}}));return a.jsx(i.aH,{client:t,children:(0,a.jsxs)(o.V,{children:[a.jsx(u,{}),e]})})}},75367:(e,t,r)=>{"use strict";r.d(t,{V:()=>h,p:()=>m});var a=r(10326),s=r(17577),i=r(63171),n=r(30361),o=r(41291),l=r(50949),c=r(18019),u=r(94019);let d=(0,s.createContext)(void 0);function h({children:e}){let[t,r]=(0,s.useState)([]);return(0,a.jsxs)(d.Provider,{value:{toasts:t,addToast:(e,t,a=5e3)=>{let s=Math.random().toString(36).substring(7);r(r=>[...r,{id:s,type:e,message:t,duration:a}])},removeToast:e=>{r(t=>t.filter(t=>t.id!==e))}},children:[e,a.jsx(g,{})]})}function m(){let e=(0,s.useContext)(d);if(!e)throw Error("useToast must be used within a ToastProvider");return{success:t=>e.addToast("success",t),error:t=>e.addToast("error",t),warning:t=>e.addToast("warning",t),info:t=>e.addToast("info",t)}}function g(){let e=(0,s.useContext)(d);return e?a.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:e.toasts.map(t=>a.jsx(f,{toast:t,onClose:()=>e.removeToast(t.id)},t.id))}):null}function f({toast:e,onClose:t}){let r={success:a.jsx(n.Z,{className:"h-5 w-5"}),error:a.jsx(o.Z,{className:"h-5 w-5"}),warning:a.jsx(l.Z,{className:"h-5 w-5"}),info:a.jsx(c.Z,{className:"h-5 w-5"})};return(0,a.jsxs)("div",{className:(0,i.cn)("flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg animate-slide-up",{success:"bg-success-bg text-success border-success",error:"bg-error-bg text-error border-error",warning:"bg-warning-bg text-warning border-warning",info:"bg-info-bg text-info border-info"}[e.type]),role:"alert",children:[r[e.type],a.jsx("p",{className:"text-sm font-medium",children:e.message}),a.jsx("button",{onClick:t,className:"ml-2 opacity-70 hover:opacity-100",children:a.jsx(u.Z,{className:"h-4 w-4"})})]})}},55137:(e,t,r)=>{"use strict";r.d(t,{x:()=>c});var a=r(94464),s=r(44176);let i="http://localhost:8080/api/v1",n=!1,o=[],l=(e=null)=>{o.forEach(t=>{e?t.reject(e):t.resolve()}),o=[]},c=a.Z.create({baseURL:i,headers:{"Content-Type":"application/json"},withCredentials:!0});c.interceptors.response.use(e=>e,async e=>{let t=e.config,r=t?.url||"",u=r.includes("/auth/login")||r.includes("/auth/refresh")||r.includes("/auth/logout")||r.includes("/auth/me")||r.includes("/auth/verify-email")||r.includes("/auth/register")||r.includes("/auth/forgot-password")||r.includes("/auth/reset-password");if(e.response?.status===401&&!t._retry&&!u){if(n)return new Promise((e,t)=>{o.push({resolve:e,reject:t})}).then(()=>c(t)).catch(e=>Promise.reject(e));t._retry=!0,n=!0;try{return await a.Z.post(`${i}/auth/refresh`,{},{withCredentials:!0}),l(null),c(t)}catch(t){l(t);let e=s.t.getState();return await e.logout(),Promise.reject(t)}finally{n=!1}}return Promise.reject(e)})},44176:(e,t,r)=>{"use strict";r.d(t,{t:()=>l});var a=r(68408),s=r(85251),i=r(55137);let n=!1,o=null,l=(0,a.U)()((0,s.tJ)((e,t)=>({user:null,isAuthenticated:!1,isLoading:!0,isRefreshing:!1,setUser:t=>e({user:t,isAuthenticated:!!t}),login:async t=>{let r=await i.x.post("/auth/login",t);try{let t=await i.x.get("/auth/me");e({user:t.data.data,isAuthenticated:!0,isLoading:!1})}catch{e({isAuthenticated:!0,isLoading:!1})}return r.data.data},register:async e=>(await i.x.post("/auth/register",e)).data.data,logout:async()=>{e({user:null,isAuthenticated:!1,isRefreshing:!1}),n=!1,o=null;try{await i.x.post("/auth/logout").catch(()=>{})}catch{}},refreshToken:async()=>n&&o?o:(n=!0,e({isRefreshing:!0}),o=(async()=>{try{await i.x.post("/auth/refresh");let t=await i.x.get("/auth/me");return e({user:t.data.data,isAuthenticated:!0,isRefreshing:!1}),!0}catch(t){return e({user:null,isAuthenticated:!1,isRefreshing:!1}),!1}finally{n=!1,o=null}})()),checkAuth:async()=>{if(!t().isLoading||!t().isRefreshing){e({isLoading:!0});try{let t=await i.x.get("/auth/me");e({user:t.data.data,isAuthenticated:!0,isLoading:!1})}catch(r){await t().refreshToken()?e({isLoading:!1}):e({user:null,isAuthenticated:!1,isLoading:!1})}}}}),{name:"auth-storage",storage:(0,s.FL)(()=>localStorage),partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated}),onRehydrateStorage:()=>e=>{e&&(e.isLoading=!1)}}))},75248:(e,t,r)=>{"use strict";r.d(t,{t:()=>a.t,x:()=>n});var a=r(44176),s=r(68408),i=r(55137);let n=(0,s.U)((e,t)=>({cart:null,isLoading:!1,error:null,fetchCart:async()=>{e({isLoading:!0,error:null});try{let t=await i.x.get("/store/cart");e({cart:t.data.data})}catch(t){e({error:"Failed to load cart"})}finally{e({isLoading:!1})}},addItem:async(t,r,a)=>{e({isLoading:!0,error:null});try{let s=await i.x.post("/store/cart/items",{productId:t,quantity:r,selectedOptions:a});e({cart:s.data.data})}catch(t){throw"INSUFFICIENT_STOCK"===t.response?.data?.data?.errorCode?e({error:"Not enough stock available"}):e({error:"Failed to add item"}),t}finally{e({isLoading:!1})}},updateQuantity:async(r,a,s,n)=>{let o=t().cart,l=e=>s?e.itemKey===s:e.productId===r;o&&e({cart:{...o,items:o.items.map(e=>l(e)?{...e,quantity:a,subtotal:e.priceAtAdd*a}:e),totalAmount:o.items.reduce((e,t)=>l(t)?e+t.priceAtAdd*a:e+t.subtotal,0)}});try{let t=await i.x.put(`/store/cart/items/${r}`,{quantity:a,itemKey:s,selectedOptions:n});e({cart:t.data.data})}catch(t){throw e({cart:o,error:"Failed to update quantity"}),t}},removeItem:async(r,a)=>{let s=t().cart,n=e=>a?e.itemKey===a:e.productId===r;if(s){let t=s.items.filter(e=>!n(e));e({cart:{...s,items:t,itemCount:t.length,totalAmount:t.reduce((e,t)=>e+t.subtotal,0)}})}try{let t=a?`?itemKey=${encodeURIComponent(a)}`:"",s=await i.x.delete(`/store/cart/items/${r}${t}`);e({cart:s.data.data})}catch(t){throw e({cart:s,error:"Failed to remove item"}),t}},clearCart:async()=>{try{await i.x.post("/store/cart/clear"),e({cart:null})}catch(t){throw e({error:"Failed to clear cart"}),t}},clearError:()=>e({error:null})}))},63171:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i,dS:()=>m,xG:()=>n,p6:()=>o,C7:()=>l,KP:()=>c,v2:()=>d,b6:()=>u});var a=r(41135),s=r(31009);function i(...e){return(0,s.m6)((0,a.W)(e))}function n(e,t="GHS",r="en-GH"){return new Intl.NumberFormat(r,{style:"currency",currency:t}).format(e)}function o(e,t={year:"numeric",month:"long",day:"numeric"}){let r="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-GH",t).format(r)}function l(e){let t=e.split("-");return t.length>=3?`#${t[t.length-1]}`:e}function c(e){let t=e.attributes,r=t?.images;if(!r)return null;if("string"==typeof r){try{let e=JSON.parse(r);if(e&&"object"==typeof e)return e}catch{}return null}return"object"!=typeof r?null:r}function u(e){let t=c(e);return t?t.thumbnail||t.medium||t.large||t.original||null:e.imageUrl||e.images?.[0]?.url||null}function d(e){let t=c(e);return t?t.original||t.large||t.medium||t.thumbnail||null:e.imageUrl||e.images?.[0]?.url||null}var h=r(55137);async function m(e){let t=new Map;if(!e||0===e.length)return t;try{((await h.x.post("/store/inventory/batch",e)).data.data||[]).forEach(e=>{e.productId&&t.set(e.productId,e)})}catch(e){console.error("Failed to fetch batch inventory",e)}return t}},64968:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>i});var a=r(19510);r(5023);let s=(0,r(68570).createProxy)(String.raw`/Users/kofitaylor/business/ecommerce-engine-frontend/src/components/providers.tsx#Providers`),i={title:{default:"World Genius - Premium E-Commerce",template:"%s | World Genius"},description:"Your destination for premium products and exceptional quality.",keywords:["e-commerce","shopping","premium","products"]};function n({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:"min-h-screen flex flex-col",children:a.jsx(s,{children:e})})})}},5023:()=>{}};